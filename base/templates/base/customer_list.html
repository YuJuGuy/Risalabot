{% extends 'main.html' %}
{% load static %}
{% block content %}

<div class="popup-group2" id="popup-group">
    <div class="popup-content2">
        <form method="post" id="group-creation-form2">
            {% csrf_token %}
            {{ form.name.label_tag }} {{ form.name }}
            <div id="conditions-container"></div>
            <button type="button" id="add-condition-button">Add Condition</button>
            <br>
            <button type="submit">Create Group</button>
        </form>
        <button type="button" id="close-popup-button">Close</button>
    </div>
</div>


<template id="condition-template">
    <div class="condition">
        <select name="condition_field">
            <option value="total_sales">Total Sales</option>
            <option value="total_orders">Total Orders</option>
            <option value="store_rating">Store Rating</option>
        </select>
        <select name="symbol_field">
            <option value="<"><</option>
            <option value=">">></option>
            <option value="between">between</option>
        </select>
        <div class="value-container">
            <input type="number" name="value_field" class="value-field" />
        </div>
        <button type="button" class="remove-condition">Remove</button>
    </div>
</template>

<div class="cards-container" id = "group-cards-container">
    <div class="customers-card-container">
        <div class="all-customers">
            <i class="fa-solid fa-user"></i>
        </div>
        <div class="customers-count">
            <span class="customers-count-title">عدد العملاء</span>
            <span class="customers-count-number">Loading</span>
        </div>
    </div>

    <div class="group-card-container" id="group-card">
        <div class="all-customers">
            <i class="fa-solid fa-user"></i>
        </div>
        <div class="customers-count">
            <span class="customers-new-group">مجموعة جديدة</span>
            <span class="customers-group-title">انشئ مجموعة جديدة</span>
        </div>
    </div>
    
</div>


<div class="table-container">
    <div class="table-header">
        <div class="table-search">
            <input type="text" id="search" placeholder="Search customers...">
        </div>
        <div class="table-buttons">
            To filter profiles, 
            <a href="#">click here</a>
        </div>
    </div>
    <div id="customers-loading">Loading customers...</div>
    <table id="customers-table" style="display: none;">
        <thead>
            <tr>
                <th>الأسم</th>
                <th>البريد الالكتروني</th>
                <th>رقم الهاتف</th>
                <th>الموقع</th>
                <th>المجموعات</th>
                <th>تاريخ المزامنة</th>
            </tr>
        </thead>
        <tbody id="customers-body">
            <!-- Customer data will be injected here by JavaScript -->
        </tbody>
    </table>
</div>

<meta name="csrf-token" content="{{ csrf_token }}">

<div id="data-urls" data-customers-url="{% url 'get_customers' %}"></div>

<script src="{% static 'js/customerspage.js' %}"></script>

{% endblock %}
